## HTTP 메서드의 속성

* 안전 (Safe Methods)
* 멱등 (Idempotent Methods)
* 캐시가능 (Cacheable Methods) 

![](/img/HTTP_METHOD.png)

#### 안전 (Safe Methods)

* 호출해도 리소스를 변경하지 않는다.
    * 단순 조회용 GET 같은 경우가 해당됨
    * 무수한 GET 요청으로 인한 로그등 2차 장애는 고려하지 않음.


#### 멱등 (Idempotent Methods)
* 한 번 호출하든 두 번 호출하든 100번 호출하든 결과가 똑같은 HTTP 메서드들은 멱등한다
<br>

* 멱등 메서드
    * GET: 항상 같은 결과가 조회된다.
    * PUT: 결과를 대체한다. 따라서 같은 요청을 여러번 해도 최종 결과는 같다.
    * DELETE: 결과를 삭제한다. 같은 요청을 여러번 해도 삭제된 결과는 똑같다.
* 멱등하지 않는 메서드
    * POST: 만약 쇼핑몰 서비스라고 가정한다면 주문 POST요청이 2번 이상 나간다면 주문이 2건 들어오기 떄문이다.
 
<br>

#### 캐시 가능
* 응답 겨과 리소스를 캐시해서 사용해도 되는가?
* GET, HEAD, POST, PATCH 캐시 가능
* 실제로는 GET, HEAD 정도만 캐시로 사용, POST, PATCH는 본문 내용까지 캐시 키로 고려해야 하는데 구현이 쉽지 않다.

* 활용
    * 자동 복구 메커니즘
    * 서버가 TIMEOUT 등으로 정상 응답을 못주었을 때, 클라이언트가 같은 요청을 다시 해도 되는가? 판단 근거
<br>

####  의문점 ?
* 만약 한번 GET요청을 하고 PUT 메서드로 인해 리소스가 변경 되었다고 가정하자 이때 다시 변경된 리소스들을 GET요청으로 조회해서 return된 결과값이 다르다면 GET 메서드도 멱등하지 않을까? -> 아니다. 멱등을 따지는 기준은 외부 요인으로 인해 리소스가 변경되는 것 까지는 고려하지 않는다.
<br>

* PATCH는 멱등할까 멱등하지 않을까? -> PATCH는 경우마다 멱등하는가 하지 않는가가 다르다. 만약 한 PATCH 메서드가 호출 될 때마다 count를 1씩 업데이트 한다고 가정하자 그러면 이 PATCH 메서드는 멱등하지 않는다. 하지만 PATCH를 동적이 아닌 정적으로 한 필드를 고정값으로 업데이트를 친다면 해당 PATCH 메서드는 멱등한다.